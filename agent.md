# LOG分析儀 - AI開發規範

## 版本時間管理規範

### 重要原則
- **版本時間必須使用台北時區 (Asia/Taipei)**
- **版本時間在應用程式啟動時設定，不是每次請求時生成**
- **每次上版更新時，需要手動更新 VERSION_TIME 常數**

### 實作方式

#### 1. 版本時間設定
```python
# 在 app.py 頂部設定版本時間
taipei_tz = pytz.timezone('Asia/Taipei')
VERSION_TIME = datetime.now(taipei_tz).strftime('%Y-%m-%d %H:%M')
```

#### 2. 上版更新流程
每次要上版時，開發AI需要：
1. 更新 `VERSION_TIME` 為當前台北時間
2. 重新構建 Docker 容器
3. 部署到目標環境

#### 3. 時區統一
- 所有時間相關功能都使用台北時區
- 確保在不同主機上運行時顯示相同的時間
- 使用 `pytz` 套件處理時區轉換

### 檔案結構
```
/app
├── app.py              # 主應用程式，包含 VERSION_TIME
├── log_analyzer.py     # LOG分析核心邏輯
├── requirements.txt    # 包含 pytz 依賴
├── Dockerfile         # Docker 建置檔案
├── docker-compose.yml # Docker Compose 設定
└── AGENT.md          # 本檔案 - AI開發規範
```

### 開發注意事項

#### ✅ 正確做法
- 版本時間在應用程式啟動時設定一次
- 使用台北時區確保一致性
- 每次上版時手動更新版本時間

#### ❌ 錯誤做法
- 每次請求時都生成新的版本時間
- 使用系統本地時區（會因主機不同而異）
- 忘記在上版時更新版本時間

### 測試檢查清單
- [ ] 版本時間顯示台北時間
- [ ] 重新整理頁面時版本時間不變
- [ ] 在不同主機上運行時版本時間一致
- [ ] 上版時正確更新版本時間

### 相關程式碼位置
- 版本時間設定：`app.py` 第 14-15 行
- 版本時間使用：`app.py` 第 461 行
- 時區依賴：`requirements.txt` 第 8 行

---
**最後更新：** 2025-10-16 12:00 (台北時間)
**維護者：** AI開發助手
